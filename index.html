<!DOCTYPE html>
<html>
<head>
    
</head>
<body>
    <h1>Result of your game!</h1>
    <p id="result"></p>

    <p id="result-of-five"></p>
    <script>
        // Declare our variables
        let playerSelection = prompt("Type 'Rock', 'Paper' or 'Scissors'!"); 
        let choices = ['rock', 'paper', 'scissors'];

        // Loop through appropriate choices and make sure user input matches correctly
        function checkInput(){
            if(playerSelection == "" || choices.includes(playerSelection.toLowerCase)){
                alert("You must type 'Rock', 'Paper' or 'Scissors'!");
                playerSelection = prompt("Type 'Rock', 'Paper' or 'Scissors'!");
                checkInput();
            }
        }
        
        
        let computerSelection = computerPlay().toLowerCase();
        checkInput();
        playRound(playerSelection, computerSelection);

        game(playerSelection, computerSelection);

        // Function that randomizes the computers play
        function computerPlay(){
            let choices = ["Rock", "Paper", "Scissors"];
            let randomNumber = Math.floor(Math.random() * Math.floor(3));
            return choices[randomNumber];
        }

        // Function that detects a loss or win based off of the inputs and returns a string of how they did
        function detectLossOrWin(playerSelection, computerSelection){  
                if(playerSelection == "rock"){
                    if(computerSelection == "paper"){
                        return "win";
                    }else if(computerSelection == "rock"){
                        return "tied";
                    }else{
                        return "lose";
                    }
                }
                    
                console.log(1);
                if(playerSelection == "paper"){
                    if(computerSelection == "paper"){
                        return "tied";
                    }else if(computerSelection == "scissors"){
                        return "lose"
                    }else{
                        return "win"
                    }
                }
                    
                console.log(2);
                if(playerSelection == "scissors"){
                    if(computerSelection == "scissors"){
                        return "tied";
                    }else if(computerSelection == "rock"){
                        return "lose";
                    }else{
                        return "win";
                    }   
                }
                                 
        }

        // Function that plays a round five times and returns who won most
        function game(playerSelection, computerSelection){
            let computerWinCount;
            let playerWinCount;

            // Play 5 games
            for(let i = 0; i < 5; i++){
                let result = detectLossOrWin(playerSelection, computerSelection);
                if(result === "win"){
                    playerWinCount += 1;
                }else if(result === "lose"){
                    computerWinCount += 1;
                }
                compututerSelection = computerPlay();
            }

            if(playerWinCount > computerWinCount){
                document.getElementById("result-of-five").innerHTML = "You won more games out of five!";
            }else if(computerWinCount > playerWinCount){
                document.getElementById("result-of-five").innerHTML = "The computer won more games out of five!";
            }else{
                document.getElementById("result-of-five").innerHTML = "You and the computer tied out of five!";
            }
        }

        // Function that plays a round based off the player selection and computer selection and returns the result
        function playRound(playerSelection, computerSelection){
            let result = detectLossOrWin(playerSelection, computerSelection);
            console.log(result);

            if(result == "tied"){
                console.log(`You ${result}!`);
                document.getElementById("result").innerHTML = `You ${result}!`;
            }else if(result == "win"){
                console.log(`You ${result}! ${playerSelection} beats ${computerSelection}!`);
                document.getElementById("result").innerHTML = `You ${result}! ${playerSelection} beats ${computerSelection}!`;
            }
            else{
                console.log(`You ${result} lose! ${computerSelection} beats ${playerSelection}`);
                document.getElementById("result").innerHTML = `You ${result}... ${computerSelection} beats ${playerSelection}!`;
            }
        }
    </script>
</body>

</html>